import re


def checkForDups(tempList):  # List duplication checker
    seen = {}
    dupes = []
    for x in tempList:
        x = x.lower()
        if x not in seen:
            seen[x] = 1
        else:
            if seen[x] == 1:
                dupes.append(x)
            seen[x] += 1
    if str(dupes) == "[]":
        print("No Duplicates found")
    else:
        print("Duplicates found in List: " + str(dupes))


def renameFile(filename):

    # Need to be able to handle triple digits eg ep 123

    removeStrings = [  # Remove all strings listed (Note: case and order doesn't matter)
        "()",
        "[]",
        "{}",
        "[Web 1080p HEVC Multi]",
        "HR-RG",
        "480p",
        "(Multiple Subtitle)",
        "[Multi-Subs]",
        "Web 1080p",
        "E-OPUS",
        "English-Dub",
        "HR-GZ",
        "HR-DR",
        "HR-SW",
        "[Eng-Subs] - Judas",
        "[BluRay 1080p HEVC]",
        "BD1080p",
        "[HEVC-x265]",
        "1080p.WEB.x264",
        "WEB.x264",
        "[BD]",
        "[AAC]",
        "Judas",
        "Erai-raws",
        "[TGx]",
        "(Dual Audio_10bit_BD720p_x265)",
        "[AkihitoSubs]",
        "[anime4life.]",
        "[HR]",
        "[JacobSwaggedUp]",
        "[kokus-rips]",
        "[Nep_Blanc]",
        "[ZRIPZ]",
        "[Cleo]",
        "[BD 1080p]",
        "[Opus]",
        "[10Bit]",
        "[x265]",
        "[HEVC]",
        "[BD 1920x1080 x265 10Bit Opus]",
        "(BD1080p AC3 10bit)",
        "Dual Audio",
        "Dual_Audio",
        "[x265_HEVC]",
        "(BD Batch + OVA)",
        "[1080p]",
        "(BD 1280x720)",
        "[Subbed]",
        "WEB.h264",
        "h264",
        "h265",
        "(1080p Bluray x265 HEVC 10bit AAC 5.1 Tigole)",
        "[SEV]",
        "1080p",
        "DSNP",
        "WEBrip",
        "x265",
        "D0ct0rLew",
        "[1080p HEVC]",
        "10bit_BD720p_x265)",
        "BD720p",
        "[Pixel]",
        "[BDRip 1080p 10bit HEVC x265 Opus DualAudio(JPN ENG) Subbed Dubbed]",
        "BDRip",
        "Opus",
        "(JPN ENG)",
        "Subbed",
        "Dubbed",
        "[DB]",
        "[720p]",
        "(Dual Audio_10bit_BD1080p_x265)",
        "[Dual Audio 10bit 720p]",
        "[GSK_kun]",
        "[BDRip 1920x1080 x264 FLAC]",
        "(1920x1080 x265 flac)",
        "10-Bit",
        "YURASUKA",
        "BluRay",
        "FLAC2.0",
        "[Judas]",
        "[Kametsu]",
        "(BD 1080p Hi10 FLACx2)",
        "Hi10",
        "FLACx2",
        "[Nep_Blanc]"
        "MULTI VFF",
        "10Bits",
        "T0M",
        "ETTV",
        "BDRemux",
        "DVD",
        "WEB-DL",
        "[HorribleSubs]",
        "[AAC]"
        "ENG",
        "JPN",
        "]"
        "["
        "[~AA~]",
        "[Aeenald]",
        "[ANE]",
        "[AnimeCreed]",
        "[BlurayDesuYo]",
        "[CBM]",
        "[Cerberus]",
        "[Chimera]",
        "[DragsterPS]",
        "[Multi-Audio]",
        "[Edge]",
        "[UNCENSORED BD 1080p]",
        "[HEVC-reencode]",
        "[DVDRip 1280x720 h264 ac3]",
        "DVDRip",
        "[HQR]",
        "[KgOlve]",
        "[KH]",
        "[Kōritsu_bonkai77]",
        "[neoHEVC]",
        "[Ranger]",
        "[Reaktor]",
        "[5.1]",
        "[Shisukon]",
        "[Tsundere]",
        "1024x576",
        "[VCB-Studio]",
        "[Ma10p_1080p]",
        "[Ma10p_720p]",
        "[wat15]",
        "[WBDP]",
        "[1080p-AC3-FLAC]",
        "8-bit FLAC 16-bit",
        "8-bit",
        "16-bit",
        "[ZetaRebel]",
        "720x480",
        "720x480p",
        "[sxales]",
        "(DVDRip 720x480p x265 HEVC AC3x3 2.0x3)",
        "(Hi10)",
        "(DVD_480p)",
        "(Exiled-Destiny)",
        "[Exiled-Destiny]",
        "(10bit_BD720p_x265)",
        "[Prof]",
        "HR-J",
        "[Dual-Audio]",
        "[BD 1080p AAC HEVC 10bit]",
        "[GrimRipper]",
        ".1080p.Blu-Ray.10-Bit.Dual-Audio.DTS-HD.x265",
        "DTS-HD",
        "iAHD",
        "(1080p BluRay x265 RCVR)",
        "(Dual Audio 10bit BD1080p x265)",
        "[Dual]",
        "[Subs]",
        "[HD]",
        "BrRip",
        "[Coalgirls-subs]",
        "Blu-Ray.10-Bit.Dual-Audio.TrueHD.x265",
        "TrueHD",
        "Blu-Ray",
        "[ShowY]",
        "[FFFmpeg]",
        "[BD 1080p HEVC AAC]",
        "[FFF]",
        "[Lazy Lily]",
        "[EMBER]",
        "[Mezashite]",
        "[BD 1080p AAC]",
        "(1080p x265 q22 FS94 Joy)",
        "FLACx2 2.0x2",
        "(Dual Audio)",
        "[cen]",
        "[Complete Subbed]",
        "WEB-720PX",
        "[Shinkiro-raw]",
        "[pkanime]",
        "[hshare.net]",
        "[ENG.SUBS]",
        "[UNCEN]",
        "[960x720]",
        "[EROBEAT]",
        "[UNCUT]",
        "[BDremux]",
        "( HT )",
        "~AA~"
        "(1080p BluRay x265 HEVC 10bit AAC 7.1 Tigole)",
        "[YTS.LT]",
        ".1080p.BluRay.x264-REGRET[EtHD]",
        "[EtHD]",
        "(1080p BluRay x265 HEVC 10bit AAC 5.1 Danish+Swedish Silence)",
        "1080p HEVC 10 Bit AC3 5.1 EN Subs EN",
        "BDRip.1080p.selezen",
        "[IMAX]",
        "WEB-DLRip.1080p",
        "WEB-DL.1080p",
        "[BDRip-1080p-MultiLang-MultiSub-Chapters][RiP By MaX]",
        "[RiP By MaX]",
        ".BDRip.1080p.Rus.Eng",
        ".ITA.ENG.BDrip.1080p.x264-Fratposa",
        "Fratposa",
        ".1080p.WEBRip.x264-ParovozN",
        "ParovozN",
        "[1080p x265 10bit FS56 Joy]",
        ".1080p.BDRip.10bit.x265.AC3",
        "AC3 5.1 ITA.ENG 1080p H265 sub ita.eng",
        "Sp33dy94-MIRCrew",
        ".x264.BDRip.(720p)-MediaClub",
        "MediaClub",
        ".x264.BDRip.1080p-MediaClub",
        "[1080p x265 HEVC 10bit BluRay AAC]",
        ".WEBRip.1080p.DUB+AVO",
        "DUB+AVO",
        "Bluray x265 10Bit AAC 5.1 - GetSchwifty",
        "[1080p x265 q22 Joy]",
        ".1080p.BluRay.10bit.HEVC.6CH-MkvCage.ws",
        "MkvCage",
        "[1080p x265 q22 FS91 Joy]",
        "[1080p x265 q22 FS87 Joy]",
        "[1080p x265 q22 FS89 Joy]",
        "(1080p x265 q22 FS91 Joy)",
        "[1080p x265 10bit FS99 Joy]",
        "[1080p x265 10bit FS71 Joy]",
        "(1080p x265 S92 Joy)",
        ".iNTERNAL.720p.WEB.x264-GHOSTS",
        ".iNTERNAL.720p.WEB.x264-GHOSTS[eztv]",
        "[eztv]",
        ".720p.WEB.h264-TBS[eztv]",
        ".DVDRip.XviD-NYDIC",
        ".DVDRip.XviD-NYDIC.[UsaBit.com]",
        "[UsaBit.com]",
        "[ www.Torrent9.uno ]",
        ".FASTSUB.VOSTFR.WEBRip.XviD.EXTREME",
        ".iNTERNAL.480p.x264-mSD[eztv]",
        ".iNTERNAL.480p.x264-mSD",
        ".720p.WEB.x265-MiNX[eztv]",
        ".720p.WEB.x265-MiNX",
        ".720p.WEB.x265",
        ".1080p.HDTV.x264-FaiLED[rarbg]",
        "[rarbg]",
        "FaiLED",
        "(1080p AMZN WEB-DL x265 HEVC 10bit AAC 2.0 Panda)",
        ".1080p.BluRay.10Bit.HEVC.EAC3-SARTRE",
        ".1080p.NF.WEBRip.DD5.1.x264-Morpheus",
        ".OAR.1080p.BluRay.x264-HD4U[rarbg]",
        "[480p]",
        "[DVD]",
        "[pseudo]",
        "[YTS.AG]",
        "Criterion (1080p BluRay x265 HEVC 10bit AAC 5.1 Tigole)",
        "720p HDTV 2CH x265 HEVC-PSA",
        "(1080p AMZN WEB-DL x265 HEVC 10bit EAC3 6.0 RZeroX)",
        ".BluRay.x264.AC3-ETRG",
        "(1080p DSNYP Webrip x265 10bit EAC3 5.1 Atmos - Goki)",
        "(1080p BluRay x265 HEVC 10bit DTS 5.1 Qman) [UTR]",
        "[UTR]",
        "(1080p BluRay x265 HEVC 10bit AAC 5.1 RCVR)",
        "720p BluRay x264 [i_c]",
        "[i_c]",
        "(1080p AMZN WEB-DL x265 HEVC 10bit DDP 5.1 Vyndros)",
        "1080p 10bit NF WEB-RIP x265 [Hindi DD 640Kbps Org 5.1 - Eng DD 2.0] ~ EmKayy",
        "[Hindi DD 640Kbps Org 5.1 - Eng DD 2.0]",
        "EmKayy",
        ".1080p.BluRay.H264.AAC-RARBG",
        ".1080p.WEBRip.DD5.1.x264-CM",
        ".HDTV.h264-SFM[rartv]",
        ".720p.x265-MeGusta",
        "1080p Genuine BD Rip HEVC 2-Pass 10 Bit AC3 5.1 EN Sub",
        "1080p Webrip x265 AC3 5.1 Goki [SEV]",
        ".1080p.WEBRip.x264-XLF[TGx]",
        ".1080p.CBS.WEBRip.AAC2.0.x264-TEPES[TGx]",
        ".1080p.AMZN.WEB-DL.DDP5.1.H.264-NTb[TGx]",
        "-MEECH",
        ".Bluray.TrueHD-7.1-Grym",
        "(1080p DSNYP Webrip x265 10bit EAC3 5.1 - Goki)[TAoE]",
        "Mp4 x264 AC3 1080p",
        "(1080p BluRay x265 HEVC 10bit AAC 5.1 Vyndros)",
        "(1080p BluRay x265 HEVC 10bit DTS 7.1 Qman) [UTR]",
        ".1080p.AMZN.WEBRip.DDP5.1.x265-SiGMA[rartv]",
        "Mp4 1080p",
        "(1080p BDRip x265 10bit EAC3 5.1 - Goki)[TAoE]",
        "[TAoE]",
        ".1080p.BluRay.x265-RARBG",
        "RARBG",
        "-RARBG",
        "(1080p x265 q22 Joy)",
        "[1080p AI x265 10bit Joy]",
        ".PROPER.1080p.BluRay.H264.AAC-RARBG",
        "1080p NF Webrip x265 10bit EAC3 5.1 - Ainz",
        "BDRip 1080p x264 AAC - KiNGDOM",
        "(1080p BluRay x265 HEVC 10bit AAC 5.1 RZeroX)",
        "(1080p BluRay x265 HEVC 10bit AAC 5.1 afm72)",
        "(1080p BluRay x265 HEVC 10bit AAC 7.1 Korean Silence)",
        "1080p 10 bit x264- Obey",
        "(1080p BluRay x265 HEVC 10bit AAC 5.1 FreetheFish)",
        ".1080p.AMZN.WEBRip.DDP2.0.x264-NTb",
        "(1080p BluRay x265 HEVC 10bit AC3 5.1 Chinese SAMPA)",
        "1080p.BluRay.x264-HD4U",
        ".HDTV.x264-SVA[ettv]",
        "720p.HDTV.x265-MiNX[TGx]",
        ".WEBRip.x264-ION10",
        ".WEB.h264-TBS[ettv]",
        "(1080p DS4K RED WEB-DL x265 HEVC 10bit AAC 5.1 Vyndros)",
        "(1080p BluRay x265 HEVC 10bit AAC 2.0 Vyndros)",
        ".1080p.NF.WEBRip.DDP5.1.Atmos.x264-NTG[TGx]",
        "720p BluRay x264 300MB Pahe.in",
        ".1080p.HQ.10bit.BluRay.5.1.x265.HEVC-MZABI",
        "BluRay x265 10Bit HEVC [English DD 5.1 640 Kbps] [Dzrg Torrents®]",
        ".1080p.WEB.H264-ANTAGONiST[rarbg]",
        ".1080p.DCU.WEB-DL.DDP5.1.H264-NTb[TGx]",
        ".1080p.DCU.WEBRip.DDP5.1.x264-NTb[rarbg]",
        ".1080p.BluRay.x264-SHORTBREHD[rartv]",
        ".1080P.DVDScr.X264.AC3.SHQ.Hive-CM8[TGx]",
        ".1080p.WEB.H264-METCON[TGx]",
        ".PROPER.1080p.WEB.H264-ELiMiNATE[TGx]",
        ".1080p.WEB-DL.DD5.1.H264-TOMMY[TGx]",
        ".1080p.WEB-DL.DD5.1.H264-BTN[TGx]",
        "(1080p ATVP Webrip x265 10bit EAC3 5.1 Atmos - Goki)",
        ".1080p.BluRay.x265.HEVC.EAC3-SARTRE",
        ".720p.HDTV.TNT",
        ".1080p.BluRay.x265.HEVC.10bit.5,1ch(xxxpav69)",
        "(xxxpav69)",
        "BR EAC3 VFF ENG 1080p x265 10Bits T0M",
        ".1080p.AMZN.WEBRip.DDP5.1.x264-TEPES[rarbg]",
        "[YTS.AM]",
        "-Judas[TGx]",
        ".1080p.BluRay.x264.AC3-DDL",
        "(1080p AMZN Webrip x265 10bit EAC3 5.1 - Goki)",
        "1080p 10bit Bluray x265 HEVC [Org DD 5.1 Hindi + DD 5.1 English] ESub ~ TombDoc",
        "[1080p x265 10bit Joy]",
        "(1080p Bluray x265 HEVC 10bit AAC 5.1 Swedish Tigole)",
        "(BD 1080p)(HEVC x265 10bit)(Multi-Subs)-Judas[TGx]",
        "_(10bit_BD1080p_x265)",
        "(10bit_BD1080p_x265)",
        "(480p DVD x265 HEVC 10bit DD5.1 Vyndros)",
        "(1080p BD x265 10bit FS79 Joy)",
        "(1080p BD x265 10bit FS73 Joy)",
        "(1080p BD x265 10bit FS84 Joy)",
        "(1080p BD x265 10bit FS89 Joy)",
        "(1080p BD x265 10bit FS87 Joy)",
        "(1080p BD x265 10bit FS88 Joy)",
        "(1080p x265 10bit Joy)",
        ".WS.1080p.BluRay.x264.DTS-FGT",
        ".1080p.BluRay.x264-TheWretched [PublicHD]",
        "[PublicHD]",
        ".1080p.BluRay.x264-SONiDO [PublicHD]",
        ".BluRay.1080p.DTS.x264.Millie.Bobby.Brown",
        ".DVD9",
        "DVD9",
        "(1080p AMZN x265 10bit FS94 Joy)",
        "(1080p AMZN x265 10bit FS93 Joy)",
        ".720p.HDTVRip",
        ".1080p.WEBRip.x264-RARBG",
        "(BD Batch)",
        "HR-SR",
        "[infanf]",
        "[ASW]",
        "[LowPower-Raws]",
        "(BD 1080P x265 Ma10p FLACx3)",
        "[Moozzi2]",
        "(BD 1920x1080 x265-10Bit Flac)",
        "[Anime Time]",
        "[AnimeRG]",
        "(Batch)",
        "[HEVC x265 8bit]",
        "ITA WEBRip 1080p x265 mkv - iDN CreW",
        "(Batch) v2",
        "[AnimeKayo]",
        "[Marshall]",
        "[kmplx]",
        "(BD 1080p x265 10-Bit Opus)",
        "[FY-Raws]",
        "[FuniDub 1080p x265 AAC]",
        ".1080p.Blu-Ray.10-Bit.Dual-Audio.DTS-HD.x265-iAHD",
        "[DavRips]",
        "[Web-Rip 1080p x265 10 bit]",
        "VOSTFR",
        "[Kaerizaki]",
        "(Weekly)",
        "(DVDRip Hi10 768x576 x265)",
        "SubsPlease]",
        "WEB-DLRip",
        "[Ohys-Raws]",
        "(AT-X 1280x720 x264 AAC)",
        "(TBS 1280x720 x264 AAC)",
        "[SubsPlease]",
        "(BD 1280x720 x264 AACx2)",
        "(BS11 1280x720 x264 AAC)",
        "(CX 1280x720 x264 AAC)",
        "[Multiple Subtitle] ",
        "[Erai-raws] ",
        "Ohys-Raws]",
        "(BD 1920x1080 x264+ FLACx2)",
        "(MX 1280x720 x264 AAC)",
        "(CX 1920x1080 x264+ AAC)",
        ".1080p.H264.ita.jpn.Ac3.sub.ita-MIRCrew",
        "(720p)(Multiple Subtitle)-Erai-raws[TGx]",
        "(480p)(Multiple Subtitle)-Erai-raws[TGx]",
        "HDRip] Dub",
        "HDRip",
        "720p DUAL AUDIO x264",
        "[NEW]",
        "[Hentai 2D]",
        "[UNCENSORED]",
        "[WEBRip 1080p]",
        "[Halfwitsubs]",
        "[Baha]",
        "[WEB-DL]",
        "[AVC AAC]",
        "[CHT]",
        "[MP4]",
        "ITA-JAP Ac3 5.1 BDRip 1080p H264 [ArMor]",
        "ITA-JAP",
        "[WEBRip 1080p HEVC]",
        "[Hindi Dub] h.264 Dual-Audio AAC x264",
        "Hindi Dub]",
        "h.264",
        "(540p)",
        "1080p BluRay DUAL AUDIO x264",
        "[ArMor]",
        "iDN CreW",
        "ITA AC3 WEBRip H264 - L@Z59",
        "[BDRip 1080p]",
        "[Batch]",
        "[H.265 10bit]",
        "[CuaP] ",
        "[mal lu zen]",
        "[Hakobune]",
        "[1080p x265]",
        "[1080p x265][Raw with JP Subs - Netflix] HR-MF",
        "[Raw with JP Subs -Netflix]",
        "HR-MF",
        "[1080p BDRemux x265 DTS-HD MA 5.1]",
        "[1080p BDRemux x265 DTS-HD MA 5.1] HR-MF",
        "FullHD x265",
        "[MiniFreeza]",
        "1080p BDRip 10 bits AAC x265-EMBER",
        "1080p Dual Audio BDRip 10 bits DD x265-EMBER",
        "[Eng-Subs]",
        "[JesuSub] vostfr 720p x265 AAC",
        "x265 10bits PTBR",
        "[1080P_x265(10bit)-FLAC][ALL]",
        "1080P HEVC 8Bit X265",
        "[Skytree]",
        "[CRRIP]",
        "[JesuSub]",
        "(DVDRip 768x576 x265 AC3)",
        "(DVDRip 1024x576 x265 FLAC)",
        "[Maximus]",
        "[Noob-Subs]",
        "CBM]",
        "(WEBDL) 1080p x265 Ukr DVO",
        "(WEBDL)",
        "Eng-Subs",
        "[YTS AM]",
        "[Blu Ray]",
        "[1080p][BD][x265][10-bit][Dual-Audio]",
        "[SAIO Raws]",
        "[BD 1920x1080 HEVC 10bit OPUS]",
        "[eng subbed]{Neroextreme}_NTRG",
        "[eng subbed]",
        "[rich_jc]",
        "BD 1080p 8bit [rich_jc]",
        "1920x1080 Blu ray FLAC",
        "Blu ray",
        "[ShadyCrab 1080p 8bit AAC] [Dual Audio]",
        "[zza]",
        "[1080p.x265][multisubs:eng,fre][Vostfr]",
        "[1080p.x265]",
        "[multisubs:eng,fre]",
        "[Delivroozzi]",
        "[VOSTFR BD x264 10bits 1080p FLAC]",
        ".JPN.UHD.BluRay.x265.HDR.DDP.5.1.MSubs-DTone",
        "[HDR]",
        "(HDR)",
        "[CHiP] ",
        "[japanese]",
        "[LWND]",
        "1080p.x264.AAC ENG Subs",
        "[35mm]",
        "[BD 1920x1036 HEVC 10bit OPUSx2]",
        "10 bit 1080p HEVC BDRip [MOVIE]",
        "[MOVIE]",
        "(BD 1920x1036 x 265 10Bit 4Audio) Movie Tokuten BD",
        "[BDRip 1036p x264 FLAC]",
        "[Beatrice-Raws]",
        "[AniFilm]",
        "[HDRip][MVO]",
        "[Nemuri]",
        "[SEKAI PROJECT]",
        "[YnK]",
        "[BD 1036p]",
        "1036p",
        "1080p NF WEBRip DD5.1 x264-QOQ",
        "1080p WEBRip x264-STRiFE",
        "VOSTFR 1080p NF WEBRip DD5.1 x264-QOQ",
        "720p WEBRip XviD AC3-FGT",
        "FRENCH WEBRip NF XviD-GZR",
        "VOSTFR WEBRip XviD AC3-ACOOL",
        "WEBRip XviD AC3-FGT",
        "FRENCH WEBRip NF x264-LiBERTAD",
        "MULTI 1080p WEBRip x264-ACOOL",
        "-ACOOL",
        "WEBRip x264-FGT",
        "[YIFY]",
        "[YTS]",
        "720p BluRay x264-W4F [RiCK]",
        "[RiCK]",
        "[5 1]",
        "[RAW]",
        "[RUS+JAP]",
        "h.265",
        ]

    # List duplication checker :)
    #checkForDups(removeStrings)

    removeStringsSorted = (sorted(removeStrings, key=len, reverse=True))

    #for item in removeStringsSorted:
    #    print(item)

    #breakpoint()

    outputFilename = filename.replace(str(".mkv"), "")

    for item in removeStringsSorted:

        if not outputFilename.find(item)+len(item) == len(item) - 1:
            # covert strings to lowercase, why? because re.sub and []() don't work together
            outputFilenameLower = outputFilename.lower()
            itemLower = item.lower()
            # Beautiful, we don't work on the actual filename, so original uppercase and lowercase is unchanged
            # only subtracting the positions
            outputFilename = outputFilename[:outputFilenameLower.find(itemLower)] + outputFilename[outputFilenameLower.find(itemLower) + len(item):]

    outputFilename = re.sub("\[[^\[][^\[][^\[][^\[][^\[][^\[][^\[][^\[]\]", "", outputFilename)  # remove e.g.[ABC12345]
    outputFilename = re.sub("\([^\[][^\[][^\[][^\[][^\[][^\[][^\[][^\[]\)", "", outputFilename)  # remove e.g.(ABC12345)

    outputFilename = outputFilename.replace(".", " ")  # _ is usually a stand in for a space
    outputFilename = outputFilename.replace("_", " ")  # _ is usually a stand in for a space

    outputFilename = re.sub("\([0-9][0-9][0-9][0-9]\)", "", outputFilename)  # Remove Years eg. (1994)
    outputFilename = re.sub("\[[0-9][0-9][0-9][0-9]\]", "", outputFilename)  # [1994]

    outputFilename = re.sub(r"ep ([0-9][0-9])", r"E\1", outputFilename, flags=re.I)  # ep 13 to E13
    outputFilename = re.sub(r"ep ([0-9])", r"E0\1", outputFilename, flags=re.I)  # ep 3 to E03

    outputFilename = re.sub(r"ep([0-9][0-9])", r"E\1", outputFilename, flags=re.I)  # ep03 to E03
    outputFilename = re.sub(r"ep([0-9])", r"E0\1", outputFilename, flags=re.I)  # ep3 to E03 Haven't seen one with this case, but il code it in anyway

    outputFilename = re.sub("- ([0-9][0-9][0-9])$", r" E\1 ", outputFilename)  # Replace "- 001" with E001, why would any have so may episodes, IDK
    outputFilename = re.sub("-([0-9][0-9])$", r" E\1 ", outputFilename)  # Replace -01 If at end of file name
    outputFilename = re.sub("\[([0-9][0-9])\]", r" E\1 ", outputFilename)  # Replace [01] with E01
    outputFilename = re.sub("([0-9][0-9])x([0-9][0-9])", r" S\1E\2 ", outputFilename)  # 11x01 to S11E01
    outputFilename = re.sub("([0-9])x([0-9][0-9])", r" S0\1E\2 ", outputFilename)  # 1x01 to S01E01

    outputFilename = outputFilename.replace(" -", " ")
    outputFilename = outputFilename.replace("- ", " ")

    outputFilename = re.sub("\s\s+", " ", outputFilename)  # Make 2 or more continuous spaces into one

    outputFilename = re.sub("\s([0-9][0-9])\s", r" E\1 ", outputFilename)  # Replace (space + 02 + space) If there are double digits left at is stage this its probably a ep number
    outputFilename = re.sub("\s([0-9][0-9])$", r" E\1 ", outputFilename)  # If there are two digits at the end of the filename, then there probably an episode number.

    outputFilename = outputFilename.strip()  # Remove leading and trailing whitespaces
    outputFilename += ".mkv"  # Add extension

    #print(outputFilename)

    return outputFilename
